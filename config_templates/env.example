# =============================================================================
# Face Recognition Server Configuration
# =============================================================================

# Server Identification
SERVER_NAME=<server name>

# Project Paths - Update these to match your system
ROOT_PATH=<path to your project root>
DATA_DIR=${ROOT_PATH}/<application data directory>
TZ=Africa/Cairo

# =============================================================================
# Server Manager Configuration
# =============================================================================
SERVER_MANAGER_PORT=<server manager port>

# Server Manager IPs - Update these for your network
SERVER_MANAGER_1_IP=<server manager 1 IP> # optional when static IPs are not required
SERVER_MANAGER_2_IP=<server manager 2 IP> # optional when static IPs are not required

# Auto-generated URLs (do not change unless you modify the IP/PORT above)
SERVER_MANAGER_1_URL=http://${SERVER_MANAGER_1_IP}:${SERVER_MANAGER_PORT}
SERVER_MANAGER_2_URL=http://${SERVER_MANAGER_2_IP}:${SERVER_MANAGER_PORT}

# =============================================================================
# GUI Service Configuration
# =============================================================================
# Container working directory (usually no need to change)
gui_working_dir=/app/Data
GUI_ORIGIN_IP=<gui origin IP>
GUI_ORIGIN_PORT=<gui origin port>

# Container mount points (auto-generated from gui_working_dir)
USERDATABASE=${gui_working_dir}/Users_DataBase
GUI_DATA=${gui_working_dir}/gui_data
Actions=${gui_working_dir}/Actions
EXCEL_PATH=${GUI_DATA}/actions.xlsx

# Mirando Admin GUI (Next.js)
MIRANDO_GUI_PORT=3000
MIRANDO_USERDATABASE=${gui_working_dir}/Users_DataBase
MIRANDO_ACTIONS1=${gui_working_dir}/Actions/server1
MIRANDO_ACTIONS2=${gui_working_dir}/Actions/server2
MIRANDO_GUI_DATA=${gui_working_dir}/gui_data
MIRANDO_EXCEL_PATH=${gui_working_dir}/gui_data/users.xlsx
JWT_SECRET=<jwt secret for admin tokens>

# =============================================================================
# Proxy Service Configuration
# =============================================================================
# HTTPS proxy configuration for GUI service
PROXY_LISTEN_PORT=<your server lising port>
PROXY_SERVER_NAME=<your server IP or domain name>
PROXY_APP_HOST=50.50.0.9
PROXY_APP_PORT=3000

# SSL Certificate Configuration
PROXY_OUTDIR=/etc/nginx/certs
PROXY_SRV_CN=<ssl certificate common name>
PROXY_SAN_DNS=<ssl subject alternative names dns>
PROXY_SAN_IP=<ssl subject alternative names ip>

# Nginx Configuration Parameters
PROXY_CLIENT_MAX_BODY_SIZE=<maximum client body size>
PROXY_READ_TIMEOUT=<proxy read timeout>
PROXY_SEND_TIMEOUT=<proxy send timeout>

# Certificate file paths (for nginx template)
CERT_FILE=/etc/nginx/certs/fullchain.crt
KEY_FILE=/etc/nginx/certs/server.key

# =============================================================================
# Load Balancer / Rate Limiting
# =============================================================================
# Total expected concurrent clients; rate limiter allows TOTAL_CLIENTS*2 requests/sec globally.
TOTAL_CLIENTS=160
# Optional overrides (leave empty to use TOTAL_CLIENTS*2)
NGINX_RATE_LIMIT_RPS=
NGINX_RATE_LIMIT_CONN=
NGINX_RATE_LIMIT_BURST=40
NGINX_RATE_LIMIT_ZONE=20m
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_OPEN_FILES=65535
NGINX_WORKER_CONNECTIONS=4096

# =============================================================================
# Docker Networks (optional overrides)
# =============================================================================
# Subnet used for fr_gui_network when static IPs are assigned (unset to avoid static IPs)
FR_GUI_NETWORK_SUBNET=
# NOTE: Only set GUI_ORIGIN_IP and SERVER_MANAGER_1_IP when using static IPs; otherwise leave empty.

# =============================================================================
# External API Endpoints
# =============================================================================
# Face recognition server API endpoints (auto-generated from server manager URLs)
S1_GET_URL=${SERVER_MANAGER_1_URL}/redis/get
S1_UPDATE_URL=${SERVER_MANAGER_1_URL}/client/status/update
S2_GET_URL=${SERVER_MANAGER_2_URL}/redis/get
S2_UPDATE_URL=${SERVER_MANAGER_2_URL}/client/status/update
